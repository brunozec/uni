@page "/UnidadeDeNegocio"
@using BFZ.AtividadeExtensionistaII.Domain.Models
@using LabelPosition = Syncfusion.Blazor.Buttons.LabelPosition

<PageTitle>Registrar</PageTitle>

<h4>Cadastro de unidade de negócio</h4>

<EditForm
    Model="UnidadeDeNegocioViewModel"
    OnValidSubmit="OnValidSubmit"
    OnInvalidSubmit="OnInvalidSubmit"
    style="height: 100%" >
    <div
        class="d-flex flex-column justify-content-between"
        style="height: 100%" >
        <DataAnnotationsValidator/>

        @if (UnidadeDeNegocioViewModel.Id != null)
        {
            <SfNumericTextBox
                Enabled="@false"
                TValue="int?"
                @bind-Value="@UnidadeDeNegocioViewModel.Id"
                FloatLabelType="FloatLabelType.Auto"
                Placeholder="Código"/>
            <ValidationMessage
                For="@(() => UnidadeDeNegocioViewModel.Id)" >
            </ValidationMessage>
        }

        <SfTextBox
            Enabled="@(!UnidadeDeNegocioViewModel.IsBusy)"
            @bind-Value="@UnidadeDeNegocioViewModel.Nome"
            Type="InputType.Text"
            FloatLabelType="FloatLabelType.Auto"
            Placeholder="Nome"/>
        <ValidationMessage
            For="@(() => UnidadeDeNegocioViewModel.Nome)" >
        </ValidationMessage>

        <SfTextBox
            Enabled="@(!UnidadeDeNegocioViewModel.IsBusy)"
            @bind-Value="@UnidadeDeNegocioViewModel.Email"
            Type="InputType.Email"
            FloatLabelType="FloatLabelType.Auto"
            Placeholder="Email"/>

        <ValidationMessage
            For="@(() => UnidadeDeNegocioViewModel.Email)" >
        </ValidationMessage>

        <SfMaskedTextBox
            Enabled="@(!UnidadeDeNegocioViewModel.IsBusy)"
            @bind-Value="@UnidadeDeNegocioViewModel.Fone"
            Mask="(00) 00000-0000"
            FloatLabelType="FloatLabelType.Auto"
            Placeholder="Fone"/>
        <ValidationMessage
            For="@(() => UnidadeDeNegocioViewModel.Fone)" >
        </ValidationMessage>

        <SfMaskedTextBox
            Enabled="@(!UnidadeDeNegocioViewModel.IsBusy)"
            @bind-Value="@UnidadeDeNegocioViewModel.EnderecoCep"
            Mask="00.000-000"
            FloatLabelType="FloatLabelType.Auto"
            Placeholder="CEP"/>
        <ValidationMessage
            For="@(() => UnidadeDeNegocioViewModel.EnderecoCep)" >
        </ValidationMessage>

        <SfTextBox
            Enabled="@(!UnidadeDeNegocioViewModel.IsBusy)"
            @bind-Value="@UnidadeDeNegocioViewModel.EnderecoNumero"
            Type="InputType.Text"
            FloatLabelType="FloatLabelType.Auto"
            Placeholder="Número"/>
        <ValidationMessage
            For="@(() => UnidadeDeNegocioViewModel.EnderecoNumero)" >
        </ValidationMessage>


        <SfTextBox
            Enabled="@(!UnidadeDeNegocioViewModel.IsBusy)"
            FloatLabelType="FloatLabelType.Auto"
            Placeholder="Senha"
            Type="InputType.Password"
            @bind-Value="@UnidadeDeNegocioViewModel.Senha" >
        </SfTextBox>

        <ValidationMessage
            For="@(() => UnidadeDeNegocioViewModel.Senha)"/>

        <SfTextBox
            Enabled="@(!UnidadeDeNegocioViewModel.IsBusy)"
            FloatLabelType="FloatLabelType.Auto"
            Placeholder="Senha"
            Type="InputType.Password"
            @bind-Value="@UnidadeDeNegocioViewModel.SenhaConfirmacao" >
        </SfTextBox>

        <ValidationMessage
            For="@(() => UnidadeDeNegocioViewModel.SenhaConfirmacao)"/>


        @if ((TipoUnidadeDeNegocio)Tipo == TipoUnidadeDeNegocio.EntidadeCaridade
             && UnidadeDeNegocioViewModel.Id == null)
        {
            <div
                class="pt-3 pb-3 ml-3" >
                <SfCheckBox
                    Disabled="@(UnidadeDeNegocioViewModel.IsBusy)"
                    TChecked="bool"
                    @bind-Checked="@CheckBoxConfirmEntidadeCaridade"
                    LabelPosition="LabelPosition.After"
                    Label="Confirmo que represento uma entidade de caridade"/>
            </div>
        }
        @if (_displayValidationErrorMessages)
        {
            <div
                class="col-md-4"
                style="margin-top:10px" >
                <label>Validation Messages: </label>
                <ValidationSummary/>
            </div>
        }
        <div
            class="d-flex sideBarFooter"
            style="padding-top: 10px; width: 100%" >

            <SfProgressButton
                Content="Salvar"
                IsPrimary="true"
                CssClass="mp-button bfz-button-w-100"
                EnableProgress="@UnidadeDeNegocioViewModel.IsBusy" >
                <ProgressButtonSpinSettings
                    Position="SpinPosition.Right" >
                </ProgressButtonSpinSettings>
            </SfProgressButton>

        </div>
    </div>
</EditForm>